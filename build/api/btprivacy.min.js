var BTPrivacy=function(){"use strict";function t(n){var r="abcdefghijklmnopqrstuvwxyz",i=r.split(""),s="",o;for(o=0;o<n;o++)s+=i[Math.floor(Math.random()*i.length)];return typeof e.callbacks[s]=="undefined"?s:t(n+1)}function n(n){function r(e){n(e)}var i=t(2);return e.callbacks[i]=r,i}function r(e){var t=n(e);return"BTPrivacy.callbacks."+t}function i(t){var n;return e.config.sendpageurl===!0&&(typeof e.config.pageurl=="string"?n=e.config.pageurl:n=document.URL),n}function s(){var e=new BrightTag.HTTP.Cookie(document),t=(new Date).getTime();return e.set("testCookies","enabled",{expires:t+1e3}),e.get("testCookies")!=="enabled"}function o(t){return function(n){clearTimeout(e.timeoutHandle),n&&n.cookies&&BTPrivacy.cookieSetter(document,n.cookies),t&&t(n)}}function u(){var e=new BrightTag.HTTP.Cookie(document);return{btpstkn:e.get("btpstkn")}}function a(t,n,s,u){t=o(t);var a=r(t),f="//"+e.config.host+e.config.siteId+n;f=(new BrightTag.HTTP.URL(f)).appendParam("callback",a).appendParam("page",i(f)).appendParams(s).toString(),e.timeoutHandle=setTimeout(function(){var t=a.substr(a.lastIndexOf(".")+1,a.length);delete e.callbacks[t],u&&u()},e.config.timeout),e.addJsonpScript(f)}var e={callbacks:{},config:{host:BrightTag.instance.host+"/api/privacy/",siteId:BrightTag.instance.site,timeout:5e3}};return e.configure=function(t){var n;for(n in t)t.hasOwnProperty(n)&&(e.config[n]=t[n])},e.addJsonpScript=function(e){var t=document.createElement("script");t.src=e,t.type="text/javascript",document.body.appendChild(t)},e.getPrivacySettings=function(e,t){var n=new BrightTag.HTTP.Cookie(document),r={};s()?a(e,"/ct?cookiesDisabled=true",r,t):(n.findEach("btps.",function(e,t){r[e]=t}),a(e,"/ct",r,t))},e.optIn=function(e,t){a(e,"/choice/opted_in",u(),t)},e.functional=function(e,t){a(e,"/choice/functional",u(),t)},e.required=function(e,t){a(e,"/choice/required",u(),t)},e.optOut=function(e,t){a(e,"/choice/opted_out",u(),t)},e}();typeof exports!="undefined"&&(exports.BTPrivacy=BTPrivacy),BTPrivacy.cookieSetter=function(e,t){"use strict";var n=new BrightTag.HTTP.Cookie(e),r,i,s,o;for(r=0;r<t.length;r++)i=t[r],o=(new Date).getTime(),s={path:i.path,expires:i.maxAge<0?"0":o+i.maxAge*1e3,secure:i.secure,version:i.version},n.set(i.name,i.value,s)}